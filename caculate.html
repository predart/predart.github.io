<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tools | Predart</title>
    
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link href="source.css" rel="stylesheet" />
    <link href="calc.css" rel="stylesheet" />
    <link rel = "icon" href = 
"/ico2.jpg" 
        type = "image/x-icon">
        <link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>
        <script
      src="https://kit.fontawesome.com/7f7f7e28a9.js"
      crossorigin="anonymous"
    ></script>
        <style>
         

        </style>
  </head>
  <body class="hero-5">
    <div class="heo">
      <nav class="navba navbar-expand-md sticky">
        <input type="checkbox"  id="check">
         <label for="check" class="checkbtn">
          <i class="fa-solid fa-bars-staggered" ></i>
         </label>
        <span class="logo"><span>Predart</span></span>
        <ul>
       <li> <a  href="/index.html">Home</a></li>
       <li> <a href="/about.html">About</a></li>
       <li><a href="/inspire.html">Inspire</a></li>
        <li><a  class="active" href="/caculate.html">Tools</a></li>
       <li> <a href="/signup.html">Login</a></li>
       </ul>
        
      </nav>
      <center>
      <form class="caculator ide" name="calc">
        <input class="value" type="text"  name="txt" readonly="">
        <span class="num clear" onclick="document.calc.txt.value =''">c</span>
        <span class="num" onclick="document.calc.txt.value +='/'">/</span>
        <span class="num" onclick="document.calc.txt.value +='*'">*</span>
        <span class="num" onclick="document.calc.txt.value +='7'">7</span>
        <span class="num" onclick="document.calc.txt.value +='8'">8</span>
        <span class="num" onclick="document.calc.txt.value +='9'">9</span>
        <span class="num" onclick="document.calc.txt.value +='-'">-</span>
        <span class="num" onclick="document.calc.txt.value +='4'">4</span>
        <span class="num" onclick="document.calc.txt.value +='5'">5</span>
        <span class="num" onclick="document.calc.txt.value +='6'">6</span>
        <span class="num plus" onclick="document.calc.txt.value +='+'">+</span>
        <span class="num" onclick="document.calc.txt.value +='3'">3</span>
        <span class="num" onclick="document.calc.txt.value +='2'">2</span>
        <span class="num" onclick="document.calc.txt.value +='1'">1</span>
        <span class="num" onclick="document.calc.txt.value +='0'">0</span>
        <span class="num" onclick="document.calc.txt.value +='00'">00</span>
        <span class="num" onclick="document.calc.txt.value +='.'">.</span>
        <span class="num equal" onclick="document.calc.txt.value =eval(calc.txt.value)">=</span>
        
      </form>
    </center>
    <div class="formular-calc">
<div class="title-calc">
  <h2>Formular-Calc Section</h2>
</div>
<div class="cleanup">
 <div class="wrapper">
  <div class="col">
    <div class="text">Currency Converter</div>
    <div class="s6">
      <div class="sm">Enter Amount</div>
      <input type="number" value="10" id="Amount">
      <div class="transfer">
        <select  class="select-text">
          <option selected disabled>From</option>
        </select>
        <div class="icons">
          <span class="bx bx-transfer"></span>
        </div>
          <select  class="select-text">
            <option selected disabled>To</option>
          </select>
        
      </div>
      <div class="s2">
        <div class="conversion"></div>
        <div class="messages"></div>
      </div>
      <button class="boton">Convert</button>
    </div>
  </div>
 </div>
<script>
const currencies = [{
        id: 'USD', name: 'US Dollars'
      },
      {
        id: 'GBP', name: 'Great Britain Pound'
      },
      {
        id: 'BRL', name: ' Brazilian Real'
      },
      {
        id: 'UGX', name: 'Ugandan Shillings'
      },
      {
        id: 'AUD', name: 'Australian Dollar'
      },
      {
        id: 'CAD', name: 'Canadian Dollar'
      },{
        id: 'EUR', name: 'Euro'
      },
      {
        id: 'KRW', name: 'South Korean Won'
      },
      {
        id: 'KES', name: 'Kenyan Shillings'
      },
      {
        id: 'CHF', name: 'Swiss Franc'
      },
      {
        id: 'GHS', name: 'Ghanian Cedi'
      },
      
      {
        id: 'INR', name: 'Indian Rupee'
      },
      {
        id: 'ZAR', name: 'South African Rand'
      },
      {
        id: 'ILS', name: 'Israeli Shekel'
      },
      {
        id: 'JPY', name: 'Japanese Yen'
      },
      {
        id: 'NGN', name: 'Nigerian Naira'
      },
      {
        id: 'CNY', name: 'Chinese Yuan'
      },
      {
        id: 'RUB', name: 'Russian Ruble'
      }];
      
      const apiBase = 'https://free.currencyconverterapi.com/api/v6/';
      const api = (currency,currency2) => `
        ${apiBase}convert?q=${currency}_${currency2}&compact=ultra&apiKey=bc3c1ae7e4fe84c4cce0`;
    
        const toast = (msg) => {
            const toastr = document.querySelector('.messages');
            if(!toastr) return;
            
            toastr.textContent = msg;
            if(!toastr.classList.contains('on')) {
              toastr.classList.add('on');
            }
          };
    
          const doneToasting = () => {
            const toastr = document.querySelector('.messages');
            if(!toastr) return;
            
            toastr.textContent = '';
            toastr.classList.remove('on');
          };
          
    
          const conversionSucceeded = (apiResponse) => {
            if(!apiResponse) {
              toast(`nothing to display ...`);
              return;
            }
            const [value] = Object.values(apiResponse) // if response is true return value showing the convert rate
    
            const btn = document.querySelector('button');
            btn.removeAttribute('disabled');
    
        const display = document.querySelector('.conversion');
        const formatter = new Intl.NumberFormat(
            'en-NG', { style: 'currency', currency: `${getSelectedCurrency2()}`}
    
        );
    
        let amount=document.getElementById("Amount").value;
        amount=amount==0?1:amount;
        display.textContent = formatter.format(value*amount); // command to convert currency in user given amount
        doneToasting(); // note that this doneToasting was declared before now this is going to show the convert rate is set this to be doneToasting
      };
    
      const createNode=(element) =>{
          return document.createElement(element);
      }
    
      const append=(parent, el)=> {
          return parent.appendChild(el);
      }
      const populateCurrencies=()=>{
          currencies.map(c => {
            let opt= createNode("option");
            opt.setAttribute("value",c.id);
            let text=document.createTextNode(`${c.name}`)
            append(opt,text);
            let sel=document.getElementsByClassName("select-text")[0];
            append(sel,opt);
          } );
      }
      const populateCurrencies2=()=>{
        currencies.map(c => {
          let opt= createNode("option");
          opt.setAttribute("value",c.id);
          let text=document.createTextNode(`${c.name}`)
          append(opt,text);
          let sel=document.getElementsByClassName("select-text")[1];
          append(sel,opt);
        } );
      }
    
      const getSelectedCurrency = () =>{
          // here, determine and return the selected value
          // of the SELECT element
          return document.getElementsByClassName("select-text")[0].value;
      };
      
      const getSelectedCurrency2 = () =>{
        // here, determine and return the selected value
        // of the SELECT element
        return document.getElementsByClassName("select-text")[1].value;
      };
    
      // function to convert currency
      const convert = (event) => {
        toast(`preparing to convert ....`);
    
        const btn = event ?
            event.target : document.querySelector('button');
    
        const selected = getSelectedCurrency();
    
        if(!selected|| selected.trim() === ''
        || !currencies.map(c => c.id).includes(selected)) return;
    
        const selected2 = getSelectedCurrency2();
    
        if(!selected2|| selected2.trim() === ''
        || !currencies.map(c => c.id).includes(selected2)) return;
    
        btn.setAttribute('disabled', 'disabled');
        toast(`Converting :)...`);
    
        const endpoint = api(selected,selected2);
    
        // make a GET fetch call to the endpoint
        // variable declared above, convert the response to JSON,
        // then call conversionSucceeded and pass the JSON data to it
    
        fetch(endpoint) // Call the fetch function passing the url of the API as a parameter
        .then((resp) => resp.json())
        .then((data) =>{
            conversionSucceeded(data);
        })
        .catch((error)=>{
            console.log(error);
        });
      };
    
      const startApp = () =>{
          // call populateCurrencies here
          populateCurrencies();
          populateCurrencies2();
          // add a click listener to the button here
          let draw = document.getElementsByClassName("boton")[0];
          draw.addEventListener("click", ()=>{
            document.getElementsByClassName("conversion")[0].style.display="block";
            convert(event);
          });
      }
      startApp(); // now i have called the function so this app will work now
    
    
  
</script>
 </div>
</div>









    

    <footer class="footer">
      <p>Copyright © 2022 Predart, Inc.</p>
    </footer>
  </body>
</html>
